<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>ArcGIS API for JavaScript Tutorials: Display a map</title>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
        position:absolute;
      }
    </style>

    <link rel="stylesheet" href="https://js.arcgis.com/4.24/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.24/"></script>

    
    <script>
        require([
            "esri/config",
            "esri/Map",
            "esri/views/MapView",

            "esri/Graphic",
            "esri/layers/GraphicsLayer",
            "esri/layers/FeatureLayer"

            ],
            function (esriConfig,Map, MapView, Graphic, GraphicsLayer, FeatureLayer) {
                esriConfig.apiKey = "AAPK9e07baae114644c084259499cb4d40dfPLsifNx65bytHxoBSrRA-dtJO_TN5jhYyvNuj5r8PXLYEhDbcIbJLq368-rwDfZi";

                const map = new Map({
                    basemap: "arcgis-topographic" // Basemap layer service
                });

                
                const view = new MapView({
                    map: map,
                    center: [-118.805, 34.027], // Longitude, latitude
                    //center: [7.464773, 51.514290], // Longitude, latitude
                    zoom: 14, // Zoom level
                    container: "viewDiv" // Div element
                });

                const graphicsLayer = new GraphicsLayer();
                map.add(graphicsLayer);
                const point = { //Create a point
                    type: "point",
                    longitude: -118.80657463861,
                    latitude: 34.0005930608889
                };
                const simpleMarkerSymbol = {
                    type: "simple-marker",
                    color: [226, 60, 40],  // Orange
                    outline: {
                        color: [255, 255, 255], // White
                        width: 1
                    }
                };

                const pointGraphic = new Graphic({
                    geometry: point,
                    symbol: simpleMarkerSymbol
                });
                graphicsLayer.add(pointGraphic);


                const trailheadsRenderer = {
                  "type": "simple",
                  "symbol": {
                    "type": "picture-marker",
                    "url": "http://static.arcgis.com/images/Symbols/NPS/npsPictograph_0231b.png",
                    "width": "18px",
                    "height": "18px"
                  }
                }
                const trailheadsLabels = {
                  symbol: {
                    type: "text",
                    color: "#FFFFFF",
                    haloColor: "#5E8D74",
                    haloSize: "2px",
                    font: {
                      size: "12px",
                      family: "Noto Sans",
                      style: "italic",
                      weight: "normal"
                    }
                  },

                  labelPlacement: "above-center",
                  labelExpressionInfo: {
                    expression: "$feature.TRL_NAME"
                  }
                };

                //Trailheads feature layer (points)
                const trailheadsLayer = new FeatureLayer({
                  url: "https://services6.arcgis.com/Zlkpq43l7FTSxOQj/arcgis/rest/services/trailheads/FeatureServer/0",
                  renderer: trailheadsRenderer,
                  labelingInfo: [trailheadsLabels]
                });
                map.add(trailheadsLayer);

                // Define a unique value renderer and symbols
                const trailsRenderer = {
                  type: "simple",
                  symbol: {
                    color: "#BA55D3",
                    type: "simple-line",
                    style: "solid"
                  },

                  visualVariables: [
                    {
                      type: "size",
                      field: "ELEV_GAIN",
                      minDataValue: 0,
                      maxDataValue: 2300,
                      minSize: "3px",
                      maxSize: "7px"
                    }
                  ]
                };
                //Trails feature layer (lines)
                const trailsLayer = new FeatureLayer({
                  url: "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails/FeatureServer/0",
                  renderer: trailsRenderer,
                  opacity: .75
                });

                map.add(trailsLayer, 0);


                // Add bikes only trails
                const bikeTrailsRenderer = {
                  type: "simple",
                  symbol: {
                    type: "simple-line",
                    style: "short-dot",
                    color: "#FF91FF",
                    width: "1px"
                  }
                };

                const bikeTrails = new FeatureLayer({
                  url:
                    "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails/FeatureServer/0",
                  renderer: bikeTrailsRenderer,
                  definitionExpression: "USE_BIKE = 'YES'"
                });

                map.add(bikeTrails, 1);


                // Add parks with a class breaks renderer and unique symbols
                function createFillSymbol(value, color) {
                  return {
                    "value": value,
                    "symbol": {
                      "color": color,
                      "type": "simple-fill",
                      "style": "solid",
                      "outline": {
                        "style": "none"
                      }
                    },
                    "label": value
                  };
                }

                const openSpacesRenderer = {
                  type: "unique-value",
                  field: "TYPE",
                  uniqueValueInfos: [
                    createFillSymbol("Natural Areas", "#9E559C"),
                    createFillSymbol("Regional Open Space", "#A7C636"),
                    createFillSymbol("Local Park", "#149ECE"),
                    createFillSymbol("Regional Recreation Park", "#ED5151")
                  ]
                };


                
                // Parks and open spaces (polygons)
                const parksLayer = new FeatureLayer({
                  url: "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space/FeatureServer/0",
                  renderer: openSpacesRenderer,
                  opacity: 0.2
                });

                map.add(parksLayer, 0);
              
                

            });
        // 
    </script> 

  </head>
  <body>
    <div id="viewDiv"></div>
  </body>
</html>